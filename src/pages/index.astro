---
import { getEntry } from "astro:content";

import SiteNav from "../components/SiteNav.astro";

import WhatsNewSection from "../components/WhatsNewSection.astro";
import FullWidthCard from "../components/FullWidthCard.astro";
import ThreeColumnsCard from "../components/ThreeColumnsCard.astro";
import PackagesSection from "../components/PackagesSection.astro";
import UpgradeSection from "../components/UpgradeSection.astro";
import ServicesSection from "../components/ServicesSection.astro";
import PlatformsSection from "../components/PlatformsSection.astro";
import TestimonialsSection from "../components/TestimonialsSection.astro";
import ContactSection from "../components/ContactSection.astro";

const home = await getEntry("landing", "home");
const { 
  whatsNewSection,  // ← añadido
  fullWidthCard, 
  threeColumnsCards, 
  packagesSection, 
  upgradeSection, 
  servicesSection, 
  platformsSection, 
  testimonialsSection, 
  contactSection 
} = home.data;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="/styles.css" />
    <title>Services — Boldmove</title>
    <link rel="stylesheet" href="https://use.typekit.net/ipc3zqt.css">
  </head>

  <body style="margin:0;background:#0b0b0c;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;">
  <SiteNav />
    <main>
    <WhatsNewSection rows={whatsNewSection.rows} />

      <FullWidthCard
        title={fullWidthCard.title}
        headline={fullWidthCard.headline}
        body={fullWidthCard.body}
        icons={fullWidthCard.icons}
      />

      {(threeColumnsCards ?? []).map((section) => (
        <ThreeColumnsCard title={section.title} items={section.items} />
      ))}

      {packagesSection && <PackagesSection {...packagesSection} />}
      {upgradeSection && <UpgradeSection {...upgradeSection} />}
      {servicesSection && <ServicesSection {...servicesSection} />}
      {platformsSection && <PlatformsSection {...platformsSection} />}
      {testimonialsSection && <TestimonialsSection {...testimonialsSection} />}
      {contactSection && <ContactSection {...contactSection} />}

    </main>

    <div class="noise" aria-hidden="true"></div>

    <script is:inline>
      (function () {
        const h = window.location.hash || "";
        if (
          h.includes("invite_token=") ||
          h.includes("recovery_token=") ||
          h.includes("confirmation_token=")
        ) {
          window.location.replace("/admin/index.html" + h);
        }
      })();
    </script>

    <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  </body>
</html>