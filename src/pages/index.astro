---
import { getEntry } from "astro:content";
import CardsSection from "../components/CardsSection.astro";

const home = await getEntry("landing", "home");
const sections = home.data.cardSections;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Sandbox</title>
  </head>
  <body style="margin:0;background:#0b0b0c;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;">
    <main style="max-width:1200px;margin:0 auto;padding:46px 18px;">
      {sections.map(section => (
		<CardsSection
			title={section.title}
			items={section.items}
		/>
		))}
    </main>
    
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<script>
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", () => {
      const h = window.location.hash || "";
      // invita: #invite_token=...
      // recovery: #recovery_token=...
      // confirmation: #confirmation_token=...
      if (h.includes("invite_token=") || h.includes("recovery_token=") || h.includes("confirmation_token=")) {
        // El widget abre el flujo correcto seg√∫n el token
        window.netlifyIdentity.open("signup");
      }
    });
    window.netlifyIdentity.init();
  }
</script>

  </body>
</html>