---
type NavItem = { label: string; href: string };

const topItems: NavItem[] = [
  { label: "What's new", href: "#whats-new" },
  { label: "Packages", href: "#packages" },
  { label: "Services", href: "#services" },
];

const bottomItems: NavItem[] = [
  { label: "Platforms", href: "#platforms" },
  { label: "Testimonials", href: "#testimonials" },
  { label: "Contact", href: "#contact" },
];
---
<div class="desktop-only" style="position: fixed; left: -1px; top: -1px; width: 58px; height: 57.69px; z-index: 315; zoom: 1.75; transform: scaleX(-1);">
    <div class="svg-scale-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 1800 1800" preserveAspectRatio="xMidYMid meet" role="img">
        <path d="M1051.09,1800h748.91V0H0v748.9c580.5,0,1051.09,470.59,1051.09,1051.09Z"></path>
        </svg>
    </div>
</div>

<div class="desktop-only" style="position: fixed; top: -1px; width: 58px; height: 57.69px; right: -1px; z-index: 314; zoom: 1.75;">
    <div class="svg-scale-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 1800 1800" preserveAspectRatio="xMidYMid meet" role="img">
        <path d="M1051.09,1800h748.91V0H0v748.9c580.5,0,1051.09,470.59,1051.09,1051.09Z"></path>
        </svg>
    </div>
</div>

<div class="desktop-only" style="position: fixed; left: -1px; width: 58px; height: 57.69px; bottom: -1px; z-index: 317; zoom: 1.75; transform: scaleX(-1) scaleY(-1);">
    <div class="svg-scale-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 1800 1800" preserveAspectRatio="xMidYMid meet" role="img">
        <path d="M1051.09,1800h748.91V0H0v748.9c580.5,0,1051.09,470.59,1051.09,1051.09Z"></path>
        </svg>
    </div>
</div>

<div class="desktop-only" style="position: fixed; width: 58px; height: 58px; right: -1px; bottom: -1px; z-index: 316; zoom: 1.75; transform: rotate(90deg);">
    <div class="svg-scale-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 1800 1800" preserveAspectRatio="xMidYMid meet" role="img">
        <path d="M1051.09,1800h748.91V0H0v748.9c580.5,0,1051.09,470.59,1051.09,1051.09Z"></path>
        </svg>
    </div>
</div>

<div class="desktop-only" style="position: fixed; left: 0; top: 0; width: 4.1rem; background-color: black; height: 100%; z-index: 313; pointer-events: none;"></div>
<div class="desktop-only" style="position: fixed; right: 0; top: 0; width: 4.1rem; background-color: black; height: 100%; z-index: 313; pointer-events: none;"></div>

<nav class="nav" aria-label="Primary">
  <img class="nav__logo" src="/images/logo-boldmove.svg" alt="Boldmove logo" />
  <!-- Desktop: top bar -->
  <div class="nav__bar nav__bar--top" aria-hidden="false">
    <div class="nav__inner">
      <ul class="nav__list">
        {topItems.map((i) => (
          <li class="nav__item"><a class="nav__link" href={i.href}>{i.label}</a></li>
        ))}
      </ul>
    </div>
  </div>

  <!-- Desktop: bottom bar -->
  <div class="nav__bar nav__bar--bottom" aria-hidden="false">
    <div class="nav__inner">
      <ul class="nav__list">
        {bottomItems.map((i) => (
          <li class="nav__item"><a class="nav__link" href={i.href}>{i.label}</a></li>
        ))}
      </ul>
    </div>
  </div>

  <!-- Mobile: hamburger -->
  <button class="nav__hamburger" type="button" aria-label="Open menu" aria-controls="navPanel" aria-expanded="false">
    <span class="nav__burgerLines" aria-hidden="true"></span>
  </button>

  <!-- Mobile: overlay panel -->
  <div class="nav__panel" id="navPanel" hidden>
    <div class="nav__panelInner" role="dialog" aria-modal="true" aria-label="Menu">
      <button class="nav__close" type="button" aria-label="Close menu">Ã—</button>

      <ul class="nav__panelList">
        {[...topItems, ...bottomItems].map((i) => (
          <li class="nav__panelItem"><a class="nav__panelLink" href={i.href}>{i.label}</a></li>
        ))}
      </ul>
    </div>

    <div class="nav__backdrop" aria-hidden="true"></div>
  </div>

  <script is:inline>
    (function () {
      const root = document.currentScript?.closest(".nav");
      if (!root) return;

      const btn = root.querySelector(".nav__hamburger");
      const panel = root.querySelector("#navPanel");
      const closeBtn = root.querySelector(".nav__close");
      const backdrop = root.querySelector(".nav__backdrop");
      const links = root.querySelectorAll(".nav__panelLink");

      function open() {
        panel.hidden = false;
        btn.setAttribute("aria-expanded", "true");
        document.documentElement.classList.add("nav-open");
      }

      function close() {
        panel.hidden = true;
        btn.setAttribute("aria-expanded", "false");
        document.documentElement.classList.remove("nav-open");
      }

      btn?.addEventListener("click", () => {
        const expanded = btn.getAttribute("aria-expanded") === "true";
        expanded ? close() : open();
      });

      closeBtn?.addEventListener("click", close);
      backdrop?.addEventListener("click", close);

      links.forEach((a) => a.addEventListener("click", () => close()));

      window.addEventListener("keydown", (e) => {
        if (e.key === "Escape") close();
      });

      // Optional: smooth scroll offset (because fixed nav)
      // If you want per-click smooth scroll even when CSS not set:
      // document.addEventListener("click", (e) => { ... })
    })();
  </script>
</nav>
