---
type Item = {
  title: string;
  body: string;
  icon: string;
  iconAlt?: string;
};

type Props = {
  title: string;
  items: Item[];
};

const { title, items } = Astro.props;

// Nos quedamos con máximo 3 columnas para mantener diseño consistente
const normalized = Array.isArray(items) ? items.slice(0, 3) : [];
---

<section class="cards-section">
  <h2 class="cards-section__title">{title}</h2>
  <img src="public/images/line-horizontal.png" alt="" class="cards-section__line" />
  <div class="cards-section__card">
    {normalized.map((item, index) => (
      <div class="cards-section__col">
        <h3 class="cards-section__col-title">{item.title}</h3>

        <p class="cards-section__body">
          {item.body}
        </p>

        <div class="cards-section__icon-wrap">
          <img
            src={item.icon}
            alt={item.iconAlt ?? ""}
            class="cards-section__icon"
            loading="lazy"
          />
        </div>
      </div>
    ))}
  </div>
</section>

<style>
  .cards-section {
    padding: 72px 0;
  }

  .cards-section__title {
    margin: 0 0 28px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: -0.02em;
    font-size: clamp(32px, 4vw, 60px);
  }

  .cards-section__card {
    background: #e9e2d3;
    border-radius: 48px;
    padding: 40px 36px;
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .cards-section__col {
    padding: 0 28px 0 0;
    display: flex;
    flex-direction: column;
    min-height: 340px;
  }

  .cards-section__col:not(:last-child) {
    border-right: 1px solid rgba(0, 0, 0, 0.35);
  }

  .cards-section__col-title {
    margin: 0;
    font-size: 30px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: -0.02em;
  }

  .cards-section__body {
    margin-top: 16px;
    max-width: 38ch;
    line-height: 1.4;
    font-size: 18px;
  }

  .cards-section__icon-wrap {
    margin-top: auto;
    padding-top: 24px;
  }

  .cards-section__icon {
    width: min(260px, 85%);
    height: auto;
    display: block;
  }

  @media (max-width: 1024px) {
    .cards-section__card {
      grid-template-columns: 1fr;
      border-radius: 32px;
    }

    .cards-section__col {
      padding: 24px 0;
      min-height: auto;
    }

    .cards-section__col:not(:last-child) {
      border-right: none;
      border-bottom: 1px solid rgba(0, 0, 0, 0.35);
    }

    .cards-section__col-title {
      font-size: 24px;
    }

    .cards-section__body {
      font-size: 16px;
    }
  }
</style>
